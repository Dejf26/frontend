{"ast":null,"code":"// src/services/NotificationService.ts\nimport { BehaviorSubject } from 'rxjs';\nclass NotificationService {\n  constructor() {\n    this.notifications = new BehaviorSubject([]);\n    this.unreadCountSubject = new BehaviorSubject(0);\n  }\n  send(notification) {\n    const currentNotifications = this.notifications.value;\n    const updatedNotifications = [notification, ...currentNotifications];\n    this.notifications.next(updatedNotifications);\n    this.updateUnreadCount();\n  }\n  list() {\n    return this.notifications.asObservable();\n  }\n  getUnreadCount() {\n    return this.unreadCountSubject.asObservable();\n  }\n  updateUnreadCount() {\n    const unreadCount = this.notifications.value.filter(notification => !notification.read).length;\n    this.unreadCountSubject.next(unreadCount);\n  }\n  markAsRead(notification) {\n    const updatedNotifications = this.notifications.value.map(notif => notif === notification ? {\n      ...notif,\n      read: true\n    } : notif);\n    this.notifications.next(updatedNotifications);\n    this.updateUnreadCount();\n  }\n}\nexport default new NotificationService();","map":{"version":3,"names":["BehaviorSubject","NotificationService","constructor","notifications","unreadCountSubject","send","notification","currentNotifications","value","updatedNotifications","next","updateUnreadCount","list","asObservable","getUnreadCount","unreadCount","filter","read","length","markAsRead","map","notif"],"sources":["C:/Users/Dawid.Migdal/Desktop/pawdebe/frontend/src/api/notificationService.ts"],"sourcesContent":["// src/services/NotificationService.ts\r\nimport { Observable, BehaviorSubject } from 'rxjs';\r\n\r\ntype ISOString = string;\r\n\r\nexport type Notification = {\r\n  title: string,\r\n  message: string,\r\n  date: ISOString,\r\n  priority: 'low' | 'medium' | 'high',\r\n  read: boolean\r\n};\r\n\r\nclass NotificationService {\r\n  private notifications: BehaviorSubject<Notification[]> = new BehaviorSubject<Notification[]>([]);\r\n  private unreadCountSubject: BehaviorSubject<number> = new BehaviorSubject<number>(0);\r\n\r\n  send(notification: Notification) {\r\n    const currentNotifications = this.notifications.value;\r\n    const updatedNotifications = [notification, ...currentNotifications];\r\n    this.notifications.next(updatedNotifications);\r\n    this.updateUnreadCount();\r\n  }\r\n\r\n  list(): Observable<Notification[]> {\r\n    return this.notifications.asObservable();\r\n  }\r\n\r\n  getUnreadCount(): Observable<number> {\r\n    return this.unreadCountSubject.asObservable();\r\n  }\r\n\r\n  private updateUnreadCount() {\r\n    const unreadCount = this.notifications.value.filter(notification => !notification.read).length;\r\n    this.unreadCountSubject.next(unreadCount);\r\n  }\r\n\r\n  markAsRead(notification: Notification) {\r\n    const updatedNotifications = this.notifications.value.map(notif => \r\n      notif === notification ? { ...notif, read: true } : notif\r\n    );\r\n    this.notifications.next(updatedNotifications);\r\n    this.updateUnreadCount();\r\n  }\r\n}\r\n\r\nexport default new NotificationService();\r\n"],"mappings":"AAAA;AACA,SAAqBA,eAAe,QAAQ,MAAM;AAYlD,MAAMC,mBAAmB,CAAC;EAAAC,YAAA;IAAA,KAChBC,aAAa,GAAoC,IAAIH,eAAe,CAAiB,EAAE,CAAC;IAAA,KACxFI,kBAAkB,GAA4B,IAAIJ,eAAe,CAAS,CAAC,CAAC;EAAA;EAEpFK,IAAIA,CAACC,YAA0B,EAAE;IAC/B,MAAMC,oBAAoB,GAAG,IAAI,CAACJ,aAAa,CAACK,KAAK;IACrD,MAAMC,oBAAoB,GAAG,CAACH,YAAY,EAAE,GAAGC,oBAAoB,CAAC;IACpE,IAAI,CAACJ,aAAa,CAACO,IAAI,CAACD,oBAAoB,CAAC;IAC7C,IAAI,CAACE,iBAAiB,CAAC,CAAC;EAC1B;EAEAC,IAAIA,CAAA,EAA+B;IACjC,OAAO,IAAI,CAACT,aAAa,CAACU,YAAY,CAAC,CAAC;EAC1C;EAEAC,cAAcA,CAAA,EAAuB;IACnC,OAAO,IAAI,CAACV,kBAAkB,CAACS,YAAY,CAAC,CAAC;EAC/C;EAEQF,iBAAiBA,CAAA,EAAG;IAC1B,MAAMI,WAAW,GAAG,IAAI,CAACZ,aAAa,CAACK,KAAK,CAACQ,MAAM,CAACV,YAAY,IAAI,CAACA,YAAY,CAACW,IAAI,CAAC,CAACC,MAAM;IAC9F,IAAI,CAACd,kBAAkB,CAACM,IAAI,CAACK,WAAW,CAAC;EAC3C;EAEAI,UAAUA,CAACb,YAA0B,EAAE;IACrC,MAAMG,oBAAoB,GAAG,IAAI,CAACN,aAAa,CAACK,KAAK,CAACY,GAAG,CAACC,KAAK,IAC7DA,KAAK,KAAKf,YAAY,GAAG;MAAE,GAAGe,KAAK;MAAEJ,IAAI,EAAE;IAAK,CAAC,GAAGI,KACtD,CAAC;IACD,IAAI,CAAClB,aAAa,CAACO,IAAI,CAACD,oBAAoB,CAAC;IAC7C,IAAI,CAACE,iBAAiB,CAAC,CAAC;EAC1B;AACF;AAEA,eAAe,IAAIV,mBAAmB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}